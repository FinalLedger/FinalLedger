<!DOCTYPE>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>

    <meta charset="UTF-8">
    <meta name="google-signin-client_id" th:content="${googleAPI}">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
<!--    <link rel="stylesheet" href="../../static/css/styles.css">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Ledger</title>
</head>
<body>
<nav th:replace="/partials/navbar :: navbar"></nav>

<div class="container" id="container">

    <h1 th:text="${googleAPI}"></h1>
    <div class="form-container log-in-container">
        <form th:action="@{/login}" method="post">
            <h1>Login</h1>
            <div th:if="${param.error}">
                Invalid Username and Password
            </div>

            <div class="social-container d-flex flex-column">
                <div>
                    <a href="#" class="social"><i class="fa fa-facebook fa-2x"></i></a>
                </div>
                <div>
                    <a href="#" class="social"><i class="fab fa fa-twitter fa-2x"></i></a>
                </div>
                <div class="g-signin2" data-onsuccess="onSignIn"></div>
            </div>

            <div id="content"></div>

            <span>or use your account</span>
            <input type="email" placeholder="Email" />
            <input type="password" placeholder="Password" />
            <a href="#">Forgot your password?</a>
            <button>Log In</button>
        </form>

        <div>
            <button onclick="signOut()">Sign Out</button>
        </div>

    </div>
    <div class="overlay-container">
        <div class="overlay">
            <div class="overlay-panel overlay-right">
                <h1>Ledger Login</h1>
                <p>Always be ready for life's big moments</p>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script>
    $(document).ready(function(){
        $("h1").click(function(){
            $("p").toggle();
            $("form").toggle();
            $("body").css({'background': '#ffffff'});
            $("nav").css({'background': '#333'});
            $("form").append('<img href="https://ca.slack-edge.com/T029BRGN0-U02N7JEAQDP-e4013fbae92e-512" height="100px"; width="100px";>');
        });
    });
    $(document).ready(function() {
        $("main").append(function () {
            $("form").append('<img href="https://ca.slack-edge.com/T029BRGN0-U02N7JEAQDP-e4013fbae92e-512" height="100px"; width="100px";>');
        });
    });


    function onSignIn(googleUser) {

        var profile = googleUser.getBasicProfile()

        console.log('User is ' + JSON.stringify(profile));

        var element = document.querySelector('#content');
        element.innerText = googleUser.getBasicProfile().getName();

        var image = document.createElement('img')
        image.setAttribute('src', profile.getImageUrl())
    }

    function signOut() {
        gapi.auth2.getAuthInstance().signOut().then(function () {
            console.log('user has signed out')
        })
    }
</script>
</body>

</html>